{% extends "base.html" %}
{% block title %}Purchase Ticket{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="card shadow p-4" style="width: 400px;">
        <h2 class="text-center mb-4">Purchase Ticket</h2>

        {% if error %}
        <div class="alert alert-danger text-center">
            {{ error }}
        </div>
        {% endif %}

        {% if success %}
        <div class="text-center">
            {{ success }}
        </div>
        {% endif %}

        <form method="post" novalidate>
            {% csrf_token %}

            <!-- Passenger field -->
            <div class="mb-3">
                <label class="form-label" for="id_passenger">{{ form.passenger.label }}</label>
                <select name="passenger" id="id_passenger" class="form-control">
                    {% for p in form.fields.passenger.queryset %}
                        <option value="{{ p.id }}">{{ p }}</option>
                    {% endfor %}
                </select>
                {% if form.passenger.errors %}
                    <div class="text-danger small">
                        {{ form.passenger.errors }}
                    </div>
                {% endif %}
            </div>

            <!-- Start Station field -->
            <div class="mb-3">
                <label class="form-label" for="id_start_station">{{ form.start_station.label }}</label>
                <select name="start_station" id="id_start_station" class="form-control">
                    {% for s in form.fields.start_station.queryset %}
                        <option value="{{ s.id }}">{{ s }}</option>
                    {% endfor %}
                </select>
                {% if form.start_station.errors %}
                    <div class="text-danger small">
                        {{ form.start_station.errors }}
                    </div>
                {% endif %}
            </div>

            <!-- Destination field -->
            <div class="mb-3">
                <label class="form-label" for="id_destination">{{ form.destination.label }}</label>
                <select name="destination" id="id_destination" class="form-control">
                    {% for d in form.fields.destination.queryset %}
                        <option value="{{ d.id }}">{{ d }}</option>
                    {% endfor %}
                </select>
                {% if form.destination.errors %}
                    <div class="text-danger small">
                        {{ form.destination.errors }}
                    </div>
                {% endif %}
            </div>

            <button type="submit" class="btn btn-primary w-100">Create Ticket</button>
        </form>

        <form method="post" action="{% url 'admin:logout' %}" class="mt-3">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger w-100">Log Out</button>
        </form>
    </div>
</div>
{% endblock %}
